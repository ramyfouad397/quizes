<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Transfusion Medicine</title>
  <style>
    /* Fonts & base style */
    @import url('https://fonts.googleapis.com/css2?family=Baloo+2:wght@500&family=Poppins:wght@400;600&display=swap');

    body {
      font-family: 'Poppins', sans-serif;
      background: #f4f7fb;
      color: #222;
      text-align: center;
      margin: 0;
      padding: 20px;
    }

    h2 {
      font-family: 'Baloo 2', cursive;
      color: #0d47a1;
      margin-bottom: 5px;
    }

    h3 {
      font-family: 'Baloo 2', cursive;
      color: #1565c0;
    }

    p.subtitle {
      font-size: 18px;
      color: #444;
      margin-top: 0;
      margin-bottom: 20px;
    }

    /* Quiz button styles */
    .quiz-btn {
      padding: 12px 20px;
      margin: 10px;
      border-radius: 16px;
      border: none;
      background: #1976d2; /* primary blue */
      color: white;
      font-weight: bold;
      font-size: 16px;
      width: 220px;
      position: relative;
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
      cursor: pointer;
      transition: transform 0.2s, background 0.3s;
    }
    .quiz-btn:hover {
      transform: scale(1.05);
      background: #0d47a1;
    }
    .progress-bar {
      position: absolute;
      bottom: 0;
      left: 0;
      height: 8px;
      background: #43a047; /* vibrant green */
      border-radius: 0 0 16px 16px;
      transition: width 0.4s;
    }

    /* Question section */
    #quiz-container {
      margin-top: 30px;
      background: #fff;
      border-radius: 20px;
      padding: 20px;
      box-shadow: 0 8px 16px rgba(0,0,0,0.1);
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
    }

    p {
      font-size: 18px;
      font-weight: 500;
    }

    /* Choice buttons */
    .choice-btn {
      display: block;
      margin: 10px auto;
      padding: 12px 16px;
      border: none;
      border-radius: 12px;
      width: 80%;
      font-size: 16px;
      background: #ff7043; /* strong orange */
      color: white;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s, transform 0.2s;
    }
    .choice-btn:hover:not(:disabled) {
      transform: scale(1.03);
      background: #e64a19;
    }
    .choice-btn:disabled {
      opacity: 0.7;
      cursor: not-allowed;
    }

    .correct { background: #2e7d32 !important; }  /* green */
    .wrong { background: #c62828 !important; }    /* red */

    /* Reset button */
    .reset-btn {
      margin-top: 20px;
      padding: 10px 18px;
      border: none;
      border-radius: 12px;
      background: #6a1b9a; /* deep purple */
      font-weight: bold;
      color: white;
      cursor: pointer;
      transition: background 0.3s;
    }
    .reset-btn:hover {
      background: #4a148c;
    }
  </style>
</head>
<body>

<h2>âœ¨ Transfusion Medicine âœ¨</h2>
<p class="subtitle">Learn by Quizzes</p>

<!-- Example quiz button -->
<button class="quiz-btn" id="quiz1-btn" onclick="loadQuiz('quiz1')">
  PRBCs Quiz
  <div class="progress-bar" id="quiz1-progress"></div>
</button>

<div id="quiz-container"></div>

<script>
const quizzes = {
  "quiz1": {
    name: "PRBCs Quiz",
    questions: [
      { q: "Main indication for PRBCs?", options: ["Anemia", "Thrombocytopenia"], answer: 0 }
    ]
  }
};

// Load saved progress
function loadProgress(quizId) {
  let data = localStorage.getItem(quizId);
  return data ? JSON.parse(data) : null;
}

// Save progress
function saveProgress(quizId, score) {
  localStorage.setItem(quizId, JSON.stringify({score: score}));
  updateButton(quizId, score);
}

// Update button color/progress
function updateButton(quizId, score) {
  const btn = document.getElementById(quizId + "-btn");
  const bar = document.getElementById(quizId + "-progress");
  if(score !== null) {
    bar.style.width = score + "%";
    btn.style.background = "#546e7a"; // gray-blue after attempt
  } else {
    btn.style.background = "#1976d2"; // blue if not taken
  }
}

// Load quiz
function loadQuiz(quizId) {
  const quiz = quizzes[quizId];
  let container = document.getElementById("quiz-container");
  container.innerHTML = `<h3>${quiz.name}</h3>`;
  quiz.questions.forEach((q,i) => {
    let html = `<p>${q.q}</p>`;
    q.options.forEach((opt,idx) => {
      html += `<button class='choice-btn' onclick='checkAnswer("${quizId}",${i},${idx},this)'>${opt}</button>`;
    });
    container.innerHTML += html;
  });
  container.innerHTML += `<button class="reset-btn" onclick="resetQuiz('${quizId}')">ðŸ”„ Restart Quiz</button>`;
}

function checkAnswer(quizId,qIdx,optIdx,btn){
  const quiz = quizzes[quizId];
  let buttons = btn.parentNode.querySelectorAll("button");
  buttons.forEach(b => b.disabled = true); // disable all
  if(optIdx === quiz.questions[qIdx].answer){
    btn.classList.add("correct");
    saveProgress(quizId,100); // here example: 100% if 1Q quiz
  } else {
    btn.classList.add("wrong");
    saveProgress(quizId,0);
  }
}

function resetQuiz(quizId){
  localStorage.removeItem(quizId);
  document.getElementById("quiz-container").innerHTML = "";
  updateButton(quizId, null);
}

// On load update buttons
updateButton("quiz1", (loadProgress("quiz1")||{}).score ?? null);
</script>
</body>
</html>
